# Store data.

### 1. นำข้อมูลไปเก็บไว้ใน MongoDB
- **ข้อมูลที่เก็บ**: 
  - MongoDB จะถูกใช้ในการเก็บข้อมูลที่มาจากเซนเซอร์ IoT แบบเป็นเชิงโครงสร้างหรือ semi-structured data โดยเฉพาะข้อมูลที่เกิดขึ้นในแต่ละช่วงเวลาที่มีความสำคัญ ซึ่งอาจรวมถึง:
    - ข้อมูลดิบ (raw data) ที่ได้รับจากเซนเซอร์ เช่น ค่าอุณหภูมิ, ความชื้น, แรงดันไฟฟ้า
    - ข้อมูลที่ผ่านการประมวลผลเบื้องต้นแล้ว เช่น ค่าที่สรุปผล, ค่าเฉลี่ยในแต่ละช่วงเวลา
    - ข้อมูลประวัติของเซนเซอร์หรือการตั้งค่าต่างๆ เช่น ค่า calibration ของเซนเซอร์ หรือสถานะของเซนเซอร์ในช่วงเวลาหนึ่ง
- **วัตถุประสงค์**: MongoDB ถูกใช้เพื่อเก็บข้อมูลเชิงประวัติที่สามารถเรียกดูย้อนหลังได้ และรองรับการสืบค้นที่ซับซ้อน เช่น การค้นหาข้อมูลจากเซนเซอร์เฉพาะตัวในระยะเวลาหนึ่ง หรือการดึงข้อมูลทั้งหมดจากเซนเซอร์ในสถานที่ที่กำหนด

---

### 2. นำข้อมูลไปส่งต่อให้ Prometheus
- **ข้อมูลที่เก็บ**: 
  - Prometheus จะถูกใช้ในการเก็บข้อมูลเชิงสถิติและข้อมูลการตรวจวัดที่เกี่ยวข้องกับการตรวจสอบสถานะของระบบ (monitoring data) แบบเรียลไทม์ ซึ่งรวมถึง:
    - Metrics ของเซนเซอร์ เช่น ค่าการทำงานต่างๆ ของเซนเซอร์ (เช่น ความถี่การส่งข้อมูล, สถานะการทำงาน)
    - Metrics ของระบบที่เกี่ยวข้อง เช่น การใช้ CPU, การใช้หน่วยความจำ หรือการตอบสนองของระบบในเวลาที่ต่างกัน
    - ข้อมูลเวลาจริง (real-time metrics) เช่น ความเปลี่ยนแปลงของค่าที่เซนเซอร์วัดได้ ณ เวลานั้น เพื่อใช้ในการแจ้งเตือนเหตุการณ์หรือปัญหาที่เกิดขึ้น
- **วัตถุประสงค์**: Prometheus เป็นระบบการ Monitor และการแจ้งเตือนที่พัฒนาขึ้นมาเพื่อจัดการกับการเก็บรวบรวมข้อมูลเมตริก (metrics) จากระบบและแอปพลิเคชันต่าง ๆ ที่ทำงานแบบ cloud-native โดยมีวัตถุประสงค์หลักในการช่วยให้ผู้ใช้สามารถตรวจสอบสุขภาพของระบบ คาดการณ์ปัญหาที่อาจเกิดขึ้น และตอบสนองต่อเหตุการณ์ต่างๆ ได้อย่างรวดเร็วและแม่นยำ

    Prometheus นั้นเข้าใจว่าออกแบบมาเพื่อการทำงานกับระบบขนาดใหญ่ที่มีความซับซ้อน โดยใช้การดึงข้อมูล Metric จากพวก Service และ Application ต่าง ๆ ผ่าน HTTP และเก็บข้อมูลเหล่านี้ในฐานข้อมูล time-        series ซึ่งช่วยให้สามารถเรียกใช้ข้อมูลย้อนหลังเพื่อวิเคราะห์แนวโน้มหรือปัญหาที่เกิดขึ้นในระบบได้ โดยนอกจากนี้ Prometheus ยังมีความสามารถในการกำหนดการแจ้งเตือนอัตโนมัติ (alerting) ที่ช่วยให้ผู้ใช้สามารถตั้งค่าการแจ้งเตือนเมื่อมีการตรวจพบเงื่อนไขที่อาจนำไปสู่ปัญหาหรือระบบขัดข้อง

จุดเด่นเพิ่มเติมของ Prometheus คือการเป็นระบบที่ทำงานแบบ standalone และมีการรวมระบบอื่นๆ ได้ง่าย เช่น Grafana ซึ่งช่วยในการสร้างแดชบอร์ดที่สวยงามและใช้งานง่ายในการตรวจสอบข้อมูลเมตริก
---

### **สรุป**
- **MongoDB** ถูกใช้สำหรับการเก็บข้อมูลดิบและข้อมูลที่ประมวลผลแล้ว ซึ่งสามารถเรียกดูย้อนหลังและใช้ในการวิเคราะห์ข้อมูลที่ซับซ้อนได้
- **Prometheus** ถูกใช้สำหรับการตรวจสอบสถานะของเซนเซอร์และระบบแบบเรียลไทม์ เพื่อใช้ในการติดตามและแจ้งเตือนการทำงาน
